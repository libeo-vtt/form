<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Form demo</title>
    </head>
    <body>
        <h1>Form demo</h1>
        <form enctype="multipart/form-data" data-errors-message="Il y a {n} erreur{s} dans ce formulaire." data-errors-prefix="Error - " class="validate-form">
            <div class="fields">
                <div class="fields-inner">
                    <div class="field name">
                        <label for="prenom">Name
                            <span class="required">(required)</span>
                        </label>
                        <input type="text" id="prenom" value="" data-validate="!empty checkname" data-message-empty="The name is required." data-message-checkname="The name is already used.">
                    </div>
                    <div class="field email">
                        <label for="courriel">Courriel
                            <span class="required">(required)</span>
                        </label>
                        <input type="text" id="courriel" value="" data-validate="!empty email" data-message-empty="The email is required." data-message-email="The email has to be valid.">
                    </div>
                    <div class="field email">
                        <label for="courriel-confirm">Courriel confirm
                            <span class="required">(required)</span>
                        </label>
                        <input type="text" id="courriel-confirm" value="" data-validate="!empty field" data-message-field="Confirmation email does not match." data-message-empty="The email is required." data-compare-field="#courriel" data-message-email="The email has to be valid.">
                    </div>
                    <div class="field postal-code">
                        <label for="postalCode">Postal code
                            <span class="required">(required)</span>
                        </label>
                        <input type="text" id="postalCode" value="" data-validate="!empty caPostalCode" data-message-capostalcode="The postal code has to be valid." data-message-empty="The postal code is required.">
                    </div>
                    <fieldset data-validate="!empty" data-message-empty="The ranges are required." data-ranges="true">
                        <legend>Ranges</legend>
                        <div class="field range">
                            <label for="range1">Range 1
                                <span class="required">(required)</span>
                            </label>
                            <input value="0" min="0" max="10" type="range" id="range1" value="">
                        </div>
                        <div class="field range">
                            <label for="range1">Range 2
                                <span class="required">(required)</span>
                            </label>
                            <input value="0" min="0" max="10" type="range" id="range2" value="" data-validate="!empty">
                        </div>
                    </fieldset>
                </div>
            </div>
            <input type="submit" value="Submit">
        </form>
        <script type="text/javascript" src="../bower_components/jquery/dist/jquery.min.js"></script>
        <script type="text/javascript" src="../bower_components/underscore/underscore-min.js"></script>
        <script type="text/javascript" src="../bower_components/is_js/is.js"></script>
        <script type="text/javascript" src="../dist/jquery.form.js"></script>
        <script>
        var $form = $('.validate-form').form({
            focusTopSubmit: true,
            customFunctions: {
                'checkname': function(value, compare){
                    var namesText = $.ajax({
                        type: 'GET',
                        dataType: 'text',
                        url: 'names.json',
                        async: false
                    }).responseText;
                    var names = JSON.parse(namesText);
                    if(names.indexOf(value.toLowerCase()) != -1) {
                        return false;
                    }
                    return true;
                }
            }
        });
        </script>
    </body>
</html>
